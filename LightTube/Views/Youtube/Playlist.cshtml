@using YTProxy.Models
@model LightTube.Contexts.PlaylistContext

@{
	ViewBag.Title = Model.Playlist.Title;
	Layout = "_Layout";
}

<h1>@Model.Playlist.Title</h1>
<h2>TODO: actually do the css for this page</h2>
<div>
	<span>@Model.Playlist.VideoCount videos</span>
	<span>•</span>
	<span>@Model.Playlist.ViewCount</span>
	<span>•</span>
	<span>Last updated @Model.Playlist.LastUpdated</span>
</div>
<p>@Model.Playlist.Description</p>
<p>
	Created by:
	<b>
		<a href="/channel/@Model.Playlist.Channel.Id">@Model.Playlist.Channel.Name</a>
	</b>
</p>


<br>

<div class="results-container">
	@foreach (VideoPreview video in Model.Playlist.Videos)
	{
		<div class="result">
			<div class="thumbnail" style="background-image: url('@video.Thumbnails.Last().Url')">
				<span>@video.Duration</span>
			</div>
			<div class="info">
				<a href="/watch?v=@video.Id&list=@Model.Id" class="title">@video.Title</a>
				<a href="/channel/@video.Channel.Id" class="uploader">@video.Channel.Name</a>
			</div>
		</div>
	}
</div>

<div class="page-controls">
	@if (!string.IsNullOrWhiteSpace(Model.ContinuationToken))
	{
		<a href="/playlist?list=@Model.Id">First Page</a>
	}
	<div class="flex-divider"></div>
	<span>•</span>
	<div class="flex-divider"></div>
	@if (!string.IsNullOrWhiteSpace(Model.Playlist.ContinuationToken))
	{
		<a href="/playlist?list=@Model.Id&continuation=@Model.Playlist.ContinuationToken">Next Page</a>
	}
</div>